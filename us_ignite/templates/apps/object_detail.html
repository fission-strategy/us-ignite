{% extends "base.html" %}{% load apps_urls %}

{% block title %}Application {{ object.name }} - {{ block.super }}{% endblock title %}

{% block content %}
<h1>{{ object.name }} {% if object.is_draft %}(Draft){% endif %}</h1>

{% if object.image  %}
<img src="{{ object.image.url }}" alt="" title="{{ object.name }}"/>
{% endif %}


<ul>
  <li>Stage: {{ object.get_stage_display }}</li>
  <li>Created by {% include "includes/display_name.html" with user=object.owner %} on {{ object.created }}</li>
  {% if can_edit %}<li><a href="{{ object.get_edit_url }}">Edit app</a></li>{% endif %}
  {% if is_owner %}
  <li><a href="{{ object.get_membership_url }}">Edit members</a></li>
  <li>
    <form method="post" action="{{ object.get_version_url }}">
      {% csrf_token %}
      <button type="submit">Create version</button>
    </form>
  </li>
  {% endif %}
</ul>

<h2>Description</h2>

{{ object.description|linebreaks }}

{% if member_list  %}
<h2>Collaborators</h2>
<ul>
  {% for member in member_list %}
  <li>
    {% include "includes/display_name.html" with user=member %}
  </li>
  {% endfor%}
</ul>
{% endif %}

{% if object.assistance %}
<h2>The project needs assistance with</h2>
<p>{{ object.assistance }}</p>
{% endif %}

{% if object.technology %}
<h2>Technology used</h2>
<p>{{ object.technology }}</p>
{% endif %}

{% if url_list %}
<h2>Also available in</h2>
{% for url in url_list %}
<div class="">
  <a href="{{ url.url }}">{{ url.name }}</a>
  {{ url.url|render_as_widget }}
</div>
{% endfor%}
</ul>
{% endif %}

<h2>Tags</h2>
{% with object.tags.all as tag_list %}
{% if tag_list %}
<ul>
  {% for tag in tag_list %}
  <li><a href="">{{ tag }}</a></li>
  {% endfor%}
</ul>
{% else %}
<p>App hasn't been tagged.</p>
{% endif %}
{% endwith %}

{% endblock content %}
